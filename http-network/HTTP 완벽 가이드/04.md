# 커넥션 관리

이번 장 

- HTTP는 어떻게 TCP 커넥션을 생성하는 가?
- TCP 커넥션의 지연, 병목, 막힘
- 병렬 커넥션, keep-alive 커넥션, 커넥션 파이프라인을 활용한 HTTP 최적화
- 커넥션 관리를 위해 따라야할 규칙들



### TCP 커넥션

http://www.example.com 을 검색할 경우

1. 브라우저가 `www.example.com`  에 해당하는 IP주소를 찾는다.
2. 브라우저가 80 포트를 얻는다.
3. 찾은 IP를 이용해서 80포트로 서버와 TCP 커넥션을 생성한다.
4. 브라우저와 서버가 요청과 응답을 한다.
5. 브라우저가 TCP 커넥션을 끊는다.

같은 일이 일어난다.



TCP는 IP 패킷이라고 불리는 작은 조각을 통해서 데이터를 전송한다. HTTP는 `HTTP, TCP, IP` 로 구성되어있는 최상위 계층이다.  HTTPS는 `HTTP, SSL, TCP, IP` 계층이다.



### TCP 커넥션 유지

TCP 커넥션은 4가지 값으로 식별하는데 `발신지 IP, 발신지 포트, 수신지 IP, 수신지 포트` 이다.

ex) `209.1.32.34:2034 / 204.62.128.58:4133` 

4가지 값이 모두 같은 TCP 커넥션이 중복으로 존재할 수는 없다.