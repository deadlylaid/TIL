# HTTP 메시지

이번 장에서 배우게 될 내용

- 메시지가 어디로 흘러가는가
- HTTP 메시지의 세 부분 (시작줄, 헤더, 개체 본문)
- 요청과 응답 메시지의 차이
- 요청 메시지가 지원하는 메소드
- 응답 메시지가 반환하는 상태 코드
- HTTP 헤더는 무슨 일을 하는가?

## 메시지의 흐름

HTTP 메시지는 클라이언트, 서버, 프록시 사이를 흐른다. `인바운드`, `아웃바운드`, `업스트림`, `다운스트림` 은 메시지의 방향을 의미한다.

클라이언트 -> 서버 방향은 인바운드, 서버 -> 클라이언트 방향은 아웃바운드이다.

### 다운스트림

HTTP 메시지는 요청, 응답 상관없이 다운스트림으로 흐른다.

```
클라이언트 -> 프락시1 -> 프락시2 -> 서버 -> 프락시2 -> 프락시1 -> 클라이언트
```

## 메시지의 각 부분

- 시작줄 : 어떤 메시지인지 서술
- 헤더 : 속성
- 본문 : 데이터

## 메시지 문법

요청 메시지의 형식

```
<메소드> <요청 URL> <버전>
<헤더>

<본문>
```

응답 메시지 형식
```
<버전> <상태 코드> <사유 구절>
<헤더>

<본문>
```

## 메소드
HTTP 는 쉽게 확장할 수 있도록 설계되었기 때문에 어떤 서버는 자기만의 메소드를 갖고 있을 수도 있다.

## 상태 코드

- 100 ~ 199 : 정보
- 200 ~ 299 : 성공
- 300 ~ 399 : 리다이렉션
- 400 ~ 499 : 클라이언트 에러
- 500 ~ 599 : 서버 에러

## 헤더

헤더 필드는 요청/응답에 메타 데이터를 추가한다. `:` 을 이용해서 key-value 목록이다.

### 헤더 분류
HTTP 는 여러 헤더 필드를 정의한다.

| 헤더 예시                                    | 설명                                  |
| ---------------------------------------- | ----------------------------------- |
| Date:Tue, 3 Oct 1992 02:16:03 GMT        | 서버가 응답을 만들어낸 시각                     |
| Content-length: 10000                    | 10,000 바이트의 데이터를 포함한 엔터티 본문         |
| Accept: image/gif, image/jpeg, text/html | 클라이언트는 GIF, JPEG, html 을 받아들일 수 있다. |

P60 ~