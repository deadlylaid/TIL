# MySQL 설치, 시작 및 종료

### 2.2.1 설정 파일 및 데이터 파일

처음 설치하면 `/etc/my.cnf` 라는 설정 파일을 만들지만 아주 기본적인 것들만 들어있다.

Mysql 서버가 실행되거나 종료될 때는 언제나 mysql server(innoDB 스토리지 엔진)의 버퍼 풀 내용을 백업하고 복구하는 과정이 진행된다.백업은 빠르게 진행되지만 서버가 새로 시작될 때는 디스크에서 데이터 파일들을 모두 읽어서 적재하기 때문에 상당한 시간이 걸린다.

### 2.2.2 서버 시작

```shell
> mysqld --default-file=/tec/my.cnf --initialize-insecure
```

위의 명령어를 이용하면 서버를 구동시킬 수 있다.  허나 위의 명령어는 mysql 서버를 처음 실행시킬때, 다시말해서 기존의 mysql 설정파일들과 로그 파일들이 없을 때 가능하다 말그대로 `initialize` 이기 때문이다.

```
> mysqld
```

기존에 있던 데이터로 다시 서버를 구동하고자 한다면 위의 명령어를 실행한다.

Mysql 은 에러 로그 파일을 기본적으로 `/var/log/mysqld.log`에 저장한다.

### 2.2.3 서버 연결 테스트

```shell
> mysql -uroot -p --host=localhost --socket=/tmp/mysql.sock
> mysql -uroot -p --host=127.0.0.1 --port=3306
> mysql -uroot -p
```

첫번째는 `--socket` 옵션을 통해 소켓 파일로 접속하는 예제이고, 두번째는 `--port` 를 이용해서 TCP/IP를 통해서 접근하는 방법이다. 로컬 서버 말고 원격 인스턴스의 MySQL로 접근하길 원한다면 반드시 두번째 방법을 이용하라.

> MySQL 서버 접속시 호스트를 `localhost` 와 `127.0.0.1`로 명시하는것은 의미가 다르다. 전자는 클라이언트 프로그램이 항상 소켓파일을 통해 접근하는데, 이는 Unix domain socket을 이용하는 방식으로 유닉스 프로세스간 통신(ICP)의 일종이다. 

세번째 방법처럼 아무것도 명시하지 않으면 기본적으로 `localhost` 를 통한 소켓 통신을 이용한다. Mysql 서버를 실행할 때 만들어지는 `mysql.sock` 은 서버를 재시작하지 않는 한 다시 만들수 없기 때문에 실수로 지우는 일이 없어야한다.

 

