## 용어

**MongoDB 인스턴스**
- 데이터베이스 호스팅의 역할

**데이터베이스**
- N개의 컬렉션 소유
- 빈 문자열("")을 데이터베이스 명으로 지정할 수 없음
- 몇몇 특수문자를 지정할 수 없음(`/, \, .,' ', *, >, <`등)
- 대소문자를 구분한다.
- 64바이트 이내의 크기로 이름을 지정할 수 있다.

- Admin
데이터베이스 인증, 권한 부여 역할
- local
단일 서버에 대한 데이터 저장

**컬렉션**
- RDB 에서 동적 스키마를 허용하는 테이블과 비슷한 역할.
- 동적스키마를 허용한다.
	- 스키마 변경이 용이함.
- 빈 문자열("")을 컬렉션 명으로 지정할 수 없음
- \0(null)로 끝나는 컬렉션 명을 지정할 수 없음
- system 컬렉션은 예약어라서 지정할 수 없음
- $ 는 컬렉션 명으로 지정할 수 없음
```
db.test.find({})
db.chat.find({})
```

**도큐먼트**
- RDB의 row 와 비슷한 역할
- 각 도큐먼트 속 키는 중복이 불가능하다.
- 키, 값은 대소문자, 데이터 타입을 구분한다.
```json
{
	"id": ObjectID("xxx"),
	"name": "jade",
	"height": "1",
},
{
	"id": ObjectID("yyy"),
	"name": "jade",
	"height": "2",
}
```


![mongo](./mongo.jpg)

## shell 실행
```
$ mongo

OR

$ brew services start mongodb-community@6.0
```
- Javascript 명령어 실행 가능

### 2.5.3 shell 기본 작업
- CRUD

- Create
```javascript
> movie = {"title": "StarWars", "director": "George Lucas", "year": 1997}
{ title: 'title1', director: 'George Lucas', year: 1997 }

> db.movie.insertOne(movie)
{
  acknowledged: true,
  insertedId: ObjectId("64d3adf6f3493ff4f47b68c2")
}

```

-  Read
```javascript
> db.movie.find({})
[
  {
    _id: ObjectId("64d3adf6f3493ff4f47b68c2"),
    title: 'title1',
    director: 'George Lucas',
    year: 1997
  }
]
```
- Update
```javascript
> db.movie.updateOne({"title": "title1"}, {$set:{reviews:[]}})
{
  acknowledged: true,
  insertedId: null,
  matchedCount: 1,
  modifiedCount: 1,
  upsertedCount: 0
}
> db.movie.find({})
[
  {
    _id: ObjectId("64d3adf6f3493ff4f47b68c2"),
    title: 'title1',
    director: 'George Lucas',
    year: 1997,
    reviews: []
  }
]
```
- Delete
```javascript
> db.movie.deleteOne({"title": "title1"})
{ acknowledged: true, deletedCount: 1 }
> db.movie.find({})

```

### 2.6 데이터형

 - Null
null 값과 존재하지 않는 필드를 표현
```json
{"x": null}
```
- Boolean
참/거짓을 표현
```json
{"x": true, "y": false}
```
- Number
64비트 부동소수점 수를 기본으로 사용, 4byte, 8byte `NumberInt`, `NumberLong` 클래스 사용
```json
{"x": 3, "y": 3.14, "z": NumberInt("3"), "q": NumberLong("3")}
```
- String
UTF-8 문자열 표시
```json
{"x": "foobar"}
```
- DateTime
1970 년 1월 1일부터 1/1000초 단위의 64비트 정수로 날짜를 저장.
```json
{"x": NewDate()}
```
- Regex
쿼리 javascript 정규 표현식 문법 사용 가능
```json
{"x": /foobar/i}
```

- Array
값의 셋이나 리스트를 배열로 표현 가능
```json
{"x": ["a", "b", "c"]}
{"things": ["pie", 3.14]}
```
배열 속에 서로 다른 데이터 타입을 저장 가능

- Inner Document
도큐먼트는 부모 도큐먼트의 값으로 내정된 도큐먼트 전체를 포함 가능
```json
{"x": {"foo": "bar"}}
```
- Object ID
객체 ID 는 도큐먼트 12바이트 ID
```json
{"x": ObjectID()}
```
- Code
```json
{"x": function() {/*...*/}}
```
